<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Top Risk Analysis — PRISM Visual Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root{ --bg:#111; --card:#181818; --ink:#f2f2f2; --muted:#a9b0b7; --good:#19b140; --sus:#a64dff; }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--ink)}
    header{background:linear-gradient(180deg,rgba(24,24,24,.95),rgba(17,17,17,.9));border-bottom:1px solid #2a2a2a;padding:20px;text-align:center}
    h1{font-size:28px;margin:0 0 6px}
    p{color:#dcdcdc;max-width:900px;margin:0 auto}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    .row{display:grid;grid-template-columns:1fr;gap:20px}
    @media(min-width:900px){.row{grid-template-columns:1fr 1fr}}
    .card{background:var(--card);border:1px solid #2a2a2a;border-radius:18px;padding:18px}
    .foot{font-size:12px;color:var(--muted)}
    #matrix{display:grid;grid-template-columns:60px repeat(5,1fr);grid-auto-rows:50px;gap:6px;align-items:center}
    #matrix .lab{justify-self:center;color:#a9b0b7;font-size:12px}
    .cell{position:relative;border:1px solid #2a2a2a;border-radius:10px;background:#141414}
    .pin{position:absolute;bottom:6px;left:6px;background:#111;border:1px solid #2a2a2a;color:#f2f2f2;padding:3px 6px;border-radius:8px;font-size:11px;white-space:nowrap}
    .key{display:flex;gap:10px;flex-wrap:wrap;font-size:12px;color:#a9b0b7}
    .dot{width:10px;height:10px;border-radius:2px;display:inline-block;vertical-align:middle;margin-right:6px}
  </style>
</head>
<body>
  <header>
    <h1>LexCorp PRISM — Top Risk Analysis</h1>
    <p>This visualization combines real-world risk analysis structure with PRISM’s satirical style. Data exaggerated for comedic and educational purposes.</p>
  </header>
  <main class="wrap">
    <section class="row">
      <div class="card">
        <h2>Risk Scores (Likelihood × Impact)</h2>
        <canvas id="scoresChart" height="280"></canvas>
        <p class="foot">Part 2 visual: shows the five biggest threats rated 1–5 for likelihood and impact.</p>
      </div>
      <div class="card">
        <h2>Risk Matrix (Likelihood vs. Impact)</h2>
        <div id="matrix"></div>
        <div class="key" style="margin-top:8px">
          <span><span class="dot" style="background:#15361f"></span> Low</span>
          <span><span class="dot" style="background:#285a34"></span> Medium</span>
          <span><span class="dot" style="background:#2d8744"></span> High</span>
          <span><span class="dot" style="background:#19b140"></span> Very High</span>
        </div>
        <p class="foot">Rows = Likelihood (1–5), Columns = Impact (1–5). Pins show the position of each threat.</p>
      </div>
    </section>

    <section class="card" style="margin-top:20px">
      <h2>Threat Composition Donut</h2>
      <canvas id="donutChart" height="260"></canvas>
      <p class="foot">Category share of total risk exposure.</p>
    </section>

    <section class="card" style="margin-top:20px">
      <h2>Visual Context — PRISM vs. Superman</h2>
      <canvas id="timelineChart" height="240"></canvas>
      <p class="foot">Satirical comparison: macro shocks vs. unpredictable cape events vs. PRISM calm interventions.</p>
    </section>
  </main>

  <script>
    // === Risk Data ===
    const risks = [
      { name: 'Unpredictable Behavior of “Superman”', L: 5, I: 5, cat: 'External/Metahuman' },
      { name: 'Unauthorized System Access', L: 4, I: 4, cat: 'Cyber' },
      { name: 'Supply Chain Vulnerability', L: 4, I: 5, cat: 'Third-Party' },
      { name: 'Internal Insider Threats', L: 3, I: 4, cat: 'Human' },
      { name: 'Kryptonian Counter-Adaptation', L: 3, I: 5, cat: 'External/Metahuman' },
    ];

    risks.forEach(r => r.score = r.L * r.I);
    const sorted = [...risks].sort((a,b) => b.score - a.score);

    // === Bar Chart ===
    new Chart(document.getElementById('scoresChart').getContext('2d'), {
      type: 'bar',
      data: { labels: sorted.map(r => r.name), datasets: [{ label: 'Risk Score', data: sorted.map(r => r.score), backgroundColor: '#19b140' }] },
      options: { indexAxis: 'y', plugins: { legend: { display:false } }, scales:{ x:{ticks:{color:'#a9b0b7'},grid:{color:'#252525'},suggestedMax:25}, y:{ticks:{color:'#dcdcdc'},grid:{display:false}} } }
    });

    // === Matrix ===
    const m = document.getElementById('matrix');
    const colorFor = (score) => score>=20?'#19b140':score>=12?'#2d8744':score>=6?'#285a34':'#15361f';
    m.innerHTML = '<div></div>' + [1,2,3,4,5].map(n=>`<div class="lab">${n}</div>`).join('');
    for (let L=1; L<=5; L++) {
      m.insertAdjacentHTML('beforeend', `<div class="lab">${L}</div>`);
      for (let I=1; I<=5; I++) {
        const score=L*I;const cell=document.createElement('div');cell.className='cell';cell.style.background=colorFor(score);m.appendChild(cell);
      }
    }
    const cells = Array.from(m.querySelectorAll('.cell'));
    const idx = (L,I)=> (L-1)*5+(I-1);
    risks.forEach(r=>{const c=cells[idx(r.L,r.I)];const p=document.createElement('div');p.className='pin';p.textContent=r.name.split(' ')[0];c.appendChild(p);});

    // === Donut Chart ===
    const byCat = risks.reduce((a,r)=>{a[r.cat]=(a[r.cat]||0)+r.score;return a;},{});
    new Chart(document.getElementById('donutChart').getContext('2d'), {
      type:'doughnut', data:{ labels:Object.keys(byCat), datasets:[{ data:Object.values(byCat), backgroundColor:['#19b140','#3f8cff','#a64dff','#2d8744']}] }, options:{ plugins:{ legend:{ labels:{color:'#dcdcdc'} } } }
    });

    // === Timeline (Satirical) ===
    new Chart(document.getElementById('timelineChart').getContext('2d'), {
      type:'line',
      data:{ labels:['2008','2010','2012','2013','2015','2017','2019','2021','2023','2025'], datasets:[
        {label:'Global Macro Shocks',data:[10,40,30,20,25,22,18,14,12,10],borderColor:'#3f8cff',tension:.3},
        {label:'Superman Chaos Events',data:[null,null,null,60,50,55,52,48,46,44],borderDash:[6,6],borderColor:'#a64dff',tension:.2},
        {label:'PRISM Interventions',data:[null,null,null,null,30,25,22,18,15,13],borderColor:'#19b140',tension:.3}
      ]},
      options:{ plugins:{legend:{labels:{color:'#dcdcdc'}}}, scales:{x:{ticks:{color:'#a9b0b7'},grid:{color:'#252525'}},y:{ticks:{color:'#a9b0b7'},grid:{color:'#252525'}}} }
    });
  </script>
</body>
</html>